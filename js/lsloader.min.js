/*!
 * Hexo Theme Suka | lsloader.js
 * Patched by SukkaW on 2018/7/14 https://github.com/SukkaW
 * Created by EYHN on 2017/4/17. https://github.com/EYHN
 * From sexdevil/LSLoader https://github.com/sexdevil/LSLoader
 */
window.lsloader={jsRunSequence:[],jsnamemap:{},cssnamemap:{}},lsloader.removeLS=function(e){try{localStorage.removeItem(e)}catch(e){}},lsloader.setLS=function(e,s){try{localStorage.setItem(e,s)}catch(e){}},lsloader.getLS=function(e){var s="";try{s=localStorage.getItem(e)}catch(e){s=""}return s},versionString="/*"+(window.lsversion||"noVersion")+"*/",lsloader.clean=function(){try{for(var e=[],s=0;s<localStorage.length;s++)e.push(localStorage.key(s));e.forEach(function(e){var t=lsloader.getLS(e);window.oldVersion&&window.oldVersion.reduce(function(e,s){return e||-1!==t.indexOf("/*"+s+"*/")},!1)&&lsloader.removeLS(e)})}catch(e){}},lsloader.clean(),lsloader.load=function(e,s,t,n){var o;"boolean"==typeof t&&(n=t,t=void 0),n=n||!1,t=t||function(){},(o=this.getLS(e))&&-1===o.indexOf(versionString)?(this.removeLS(e),this.requestResource(e,s,t,n)):o?o.split(versionString)[0]!=s?(console.log("reload:"+s),this.removeLS(e),this.requestResource(e,s,t,n)):(o=o.split(versionString)[1],n?(this.jsRunSequence.push({name:e,code:o}),this.runjs(s,e,o)):(document.getElementById(e).appendChild(document.createTextNode(o)),t())):this.requestResource(e,s,t,n)},lsloader.requestResource=function(s,t,e,n){var o=this;n?this.iojs(t,s,function(e,s,t){o.setLS(s,e+versionString+t),o.runjs(e,s,t)}):this.iocss(t,s,function(e){document.getElementById(s).appendChild(document.createTextNode(e)),o.setLS(s,t+versionString+e)},e)},lsloader.iojs=function(s,t,e){var n=this;n.jsRunSequence.push({name:t,code:""});try{var o=new XMLHttpRequest;o.open("get",s,!0),o.onreadystatechange=function(){4==o.readyState&&((200<=o.status&&o.status<300||304==o.status)&&""!=o.response?e(s,t,o.response):n.jsfallback(s,t))},o.send(null)}catch(e){n.jsfallback(s,t)}},lsloader.iocss=function(s,t,e,n){var o=this;try{var a=new XMLHttpRequest;a.open("get",s,!0),a.onreadystatechange=function(){4==a.readyState&&((200<=a.status&&a.status<300||304==a.status)&&""!=a.response?(e(a.response),n()):o.cssfallback(s,t,n))},a.send(null)}catch(e){o.cssfallback(s,t,n)}},lsloader.iofonts=function(s,t,e,n){var o=this;try{var a=new XMLHttpRequest;a.open("get",s,!0),a.onreadystatechange=function(){4==a.readyState&&((200<=a.status&&a.status<300||304==a.status)&&""!=a.response?(e(a.response),n()):o.cssfallback(s,t,n))},a.send(null)}catch(e){o.cssfallback(s,t,n)}},lsloader.runjs=function(e,s,t){if(s&&t)for(var n in this.jsRunSequence)this.jsRunSequence[n].name==s&&(this.jsRunSequence[n].code=t);var o,a;this.jsRunSequence[0]&&this.jsRunSequence[0].code&&"failed"!=this.jsRunSequence[0].status?((a=document.createElement("script")).appendChild(document.createTextNode(this.jsRunSequence[0].code)),a.type="text/javascript",document.getElementsByTagName("head")[0].appendChild(a),this.jsRunSequence.shift(),0<this.jsRunSequence.length&&this.runjs()):this.jsRunSequence[0]&&"failed"==this.jsRunSequence[0].status&&(o=this,(a=document.createElement("script")).src=this.jsRunSequence[0].path,a.type="text/javascript",this.jsRunSequence[0].status="loading",a.onload=function(){o.jsRunSequence.shift(),0<o.jsRunSequence.length&&o.runjs()},document.body.appendChild(a))},lsloader.tagLoad=function(e,s){this.jsRunSequence.push({name:s,code:"",path:e,status:"failed"}),this.runjs()},lsloader.jsfallback=function(e,s){if(!this.jsnamemap[s]){for(var t in this.jsnamemap[s]=s,this.jsRunSequence)this.jsRunSequence[t].name==s&&(this.jsRunSequence[t].code="",this.jsRunSequence[t].status="failed",this.jsRunSequence[t].path=e);this.runjs()}},lsloader.cssfallback=function(e,s,t){this.cssnamemap[s]||(this.cssnamemap[s]=1,(s=document.createElement("link")).type="text/css",s.href=e,s.rel="stylesheet",s.onload=s.onerror=t,(e=document.getElementsByTagName("script")[0]).parentNode.insertBefore(s,e))},lsloader.runInlineScript=function(e,s){s=document.getElementById(s).innerText;this.jsRunSequence.push({name:e,code:s}),this.runjs()},lsloader.css=function(e,s){void 0===window.lsLoadCSSMaxNums&&(window.lsLoadCSSMaxNums=0),window.lsLoadCSSMaxNums++,lsloader.load(e,s,function(){void 0===window.lsLoadCSSNums&&(window.lsLoadCSSNums=0),window.lsLoadCSSNums++,window.lsLoadCSSNums==window.lsLoadCSSMaxNums&&(document.documentElement.style.display="")},!1)},lsloader.js=function(e,s){lsloader.load(e,s,!0)};